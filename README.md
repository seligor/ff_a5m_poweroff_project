На просторах хабра я нашел статью о получении токенов для управления розетками tuya
https://habr.com/ru/articles/838814/
Если коротко, то нужно 
1. зарегистрироваться на https://platform.tuya.com/
2. убедиться, что розетки уже подключены к приложению Smart life на имеющемся аккаунте
3. получить доступ к акканнту приложения
4. получить acces id, secret, id розеток
5. установить на удалённый хост (например тот, где у вас уже установлен телеграм бот) npm, накатить tuyaapi ```npm i @tuyapi/cli -g```
6. запустить ```tuya-cli wizard``` ввести acces id, secret, ещё какой то параметр, уже забыл какой и получить список из id и key от ваших устройств

   В моих устройствах первый параметр - по сути единственный нужный. ```switch_1``` вот его и переключаю в скрипте, указывая false
   Если у вас не розетка, а например реле, то параметр может называться по другому или находиться не на первом месте. Поэтому стоит внести коррективы

poweroff_me.sh размещать нужно на удалённом хосте - его будет запускать принтер по вызову скрипта завершения работы
power_off.sh уже присутствует в принтере, если установлен zmod. В него нужно внести только небольшие дополнения и убедиться, что он имеет права для выполенния

На самом деле можно уменьшить время для halt и убрать sleep, а так же уменьшить sleep для poweroff_me.sh - это приведёт к более быстрому завершению работы
